// <auto-generated/>
#nullable enable

namespace KnockOff.Tests;

partial class EntityBaseStub
{
	/// <summary>Tracks and configures behavior for ModifiedProperties.</summary>
	public sealed class ModifiedPropertiesHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, global::System.Collections.Generic.IEnumerable<string>>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet() => GetCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for StringIndexer.</summary>
	public sealed class StringIndexerHandler
	{
		private readonly global::System.Collections.Generic.List<string> _getKeys = new();

		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount => _getKeys.Count;

		/// <summary>The key from the most recent getter access.</summary>
		public string? LastGetKey => _getKeys.Count > 0 ? _getKeys[_getKeys.Count - 1] : default;

		/// <summary>All keys accessed via the getter.</summary>
		public global::System.Collections.Generic.IReadOnlyList<string> AllGetKeys => _getKeys;

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, string, global::Neatoo.IEntityProperty>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet(string propertyName) => _getKeys.Add(propertyName);

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { _getKeys.Clear(); OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for IsPaused.</summary>
	public sealed class IsPausedHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, bool>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet() => GetCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for Parent.</summary>
	public sealed class ParentHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, global::Neatoo.IBase?>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet() => GetCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for IsValid.</summary>
	public sealed class IsValidHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, bool>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet() => GetCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for IsSelfValid.</summary>
	public sealed class IsSelfValidHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, bool>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet() => GetCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for PropertyMessages.</summary>
	public sealed class PropertyMessagesHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, global::System.Collections.Generic.IReadOnlyCollection<global::Neatoo.IPropertyMessage>>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet() => GetCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for IsBusy.</summary>
	public sealed class IsBusyHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, bool>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet() => GetCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for IsChild.</summary>
	public sealed class IsChildHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, bool>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet() => GetCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for IsModified.</summary>
	public sealed class IsModifiedHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, bool>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet() => GetCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for IsSelfModified.</summary>
	public sealed class IsSelfModifiedHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, bool>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet() => GetCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for IsMarkedModified.</summary>
	public sealed class IsMarkedModifiedHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, bool>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet() => GetCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for IsSavable.</summary>
	public sealed class IsSavableHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, bool>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet() => GetCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for IsDeleted.</summary>
	public sealed class IsDeletedHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, bool>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet() => GetCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for IsNew.</summary>
	public sealed class IsNewHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<EntityBaseStub, bool>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet() => GetCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; OnGet = null; }
	}

	/// <summary>Tracks and configures behavior for Delete.</summary>
	public sealed class DeleteHandler
	{
		/// <summary>Delegate for Delete().</summary>
		public delegate void DeleteDelegate(EntityBaseStub ko);

		private DeleteDelegate? _onCall;

		/// <summary>Number of times this method was called.</summary>
		public int CallCount { get; private set; }

		/// <summary>True if this method was called at least once.</summary>
		public bool WasCalled => CallCount > 0;

		/// <summary>Sets callback for Delete(parameterless) overload.</summary>
		public void OnCall(DeleteDelegate callback) => _onCall = callback;

		internal DeleteDelegate? GetCallback() => _onCall;

		/// <summary>Records a method call.</summary>
		public void RecordCall() => CallCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { CallCount = 0; _onCall = null; }
	}

	/// <summary>Tracks and configures behavior for UnDelete.</summary>
	public sealed class UnDeleteHandler
	{
		/// <summary>Delegate for UnDelete().</summary>
		public delegate void UnDeleteDelegate(EntityBaseStub ko);

		private UnDeleteDelegate? _onCall;

		/// <summary>Number of times this method was called.</summary>
		public int CallCount { get; private set; }

		/// <summary>True if this method was called at least once.</summary>
		public bool WasCalled => CallCount > 0;

		/// <summary>Sets callback for UnDelete(parameterless) overload.</summary>
		public void OnCall(UnDeleteDelegate callback) => _onCall = callback;

		internal UnDeleteDelegate? GetCallback() => _onCall;

		/// <summary>Records a method call.</summary>
		public void RecordCall() => CallCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { CallCount = 0; _onCall = null; }
	}

	/// <summary>Tracks and configures behavior for Save.</summary>
	public sealed class SaveHandler
	{
		/// <summary>Delegate for Save().</summary>
		public delegate global::System.Threading.Tasks.Task<global::Neatoo.IEntityBase> SaveDelegate(EntityBaseStub ko);

		private SaveDelegate? _onCall;

		/// <summary>Number of times this method was called.</summary>
		public int CallCount { get; private set; }

		/// <summary>True if this method was called at least once.</summary>
		public bool WasCalled => CallCount > 0;

		/// <summary>Sets callback for Save(parameterless) overload.</summary>
		public void OnCall(SaveDelegate callback) => _onCall = callback;

		internal SaveDelegate? GetCallback() => _onCall;

		/// <summary>Records a method call.</summary>
		public void RecordCall() => CallCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { CallCount = 0; _onCall = null; }
	}

	/// <summary>Tracks and configures behavior for GetProperty.</summary>
	public sealed class GetPropertyHandler
	{
		/// <summary>Delegate for GetProperty(string propertyName).</summary>
		public delegate global::Neatoo.IValidateProperty GetPropertyDelegate(EntityBaseStub ko, string propertyName);

		private GetPropertyDelegate? _onCall;

		private readonly global::System.Collections.Generic.List<string> _calls = new();

		/// <summary>Number of times this method was called.</summary>
		public int CallCount => _calls.Count;

		/// <summary>True if this method was called at least once.</summary>
		public bool WasCalled => _calls.Count > 0;

		/// <summary>The 'propertyName' argument from the most recent call.</summary>
		public string? LastCallArg => _calls.Count > 0 ? _calls[_calls.Count - 1] : null;

		/// <summary>All recorded calls with their arguments.</summary>
		public global::System.Collections.Generic.IReadOnlyList<string> AllCalls => _calls;

		/// <summary>Sets callback for GetProperty(propertyName) overload.</summary>
		public void OnCall(GetPropertyDelegate callback) => _onCall = callback;

		internal GetPropertyDelegate? GetCallback() => _onCall;

		/// <summary>Records a method call.</summary>
		public void RecordCall(string propertyName) => _calls.Add(propertyName);

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { _calls.Clear(); _onCall = null; }
	}

	/// <summary>Tracks and configures behavior for TryGetProperty.</summary>
	public sealed class TryGetPropertyHandler
	{
		/// <summary>Delegate for TryGetProperty(string propertyName, out global::Neatoo.IValidateProperty validateProperty).</summary>
		public delegate bool TryGetPropertyDelegate(EntityBaseStub ko, string propertyName, out global::Neatoo.IValidateProperty validateProperty);

		private TryGetPropertyDelegate? _onCall;

		private readonly global::System.Collections.Generic.List<string> _calls = new();

		/// <summary>Number of times this method was called.</summary>
		public int CallCount => _calls.Count;

		/// <summary>True if this method was called at least once.</summary>
		public bool WasCalled => _calls.Count > 0;

		/// <summary>The 'propertyName' argument from the most recent call.</summary>
		public string? LastCallArg => _calls.Count > 0 ? _calls[_calls.Count - 1] : null;

		/// <summary>All recorded calls with their arguments.</summary>
		public global::System.Collections.Generic.IReadOnlyList<string> AllCalls => _calls;

		/// <summary>Sets callback for TryGetProperty(propertyName, validateProperty) overload.</summary>
		public void OnCall(TryGetPropertyDelegate callback) => _onCall = callback;

		internal TryGetPropertyDelegate? GetCallback() => _onCall;

		/// <summary>Records a method call.</summary>
		public void RecordCall(string propertyName) => _calls.Add(propertyName);

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { _calls.Clear(); _onCall = null; }
	}

	/// <summary>Tracks and configures behavior for RunRules.</summary>
	public sealed class RunRulesHandler
	{
		/// <summary>Delegate for RunRules(string propertyName, global::System.Threading.CancellationToken? token).</summary>
		public delegate global::System.Threading.Tasks.Task RunRulesDelegate0(EntityBaseStub ko, string propertyName, global::System.Threading.CancellationToken? token);

		/// <summary>Delegate for RunRules(global::Neatoo.RunRulesFlag runRules, global::System.Threading.CancellationToken? token).</summary>
		public delegate global::System.Threading.Tasks.Task RunRulesDelegate1(EntityBaseStub ko, global::Neatoo.RunRulesFlag runRules, global::System.Threading.CancellationToken? token);

		private RunRulesDelegate0? _onCall0;
		private RunRulesDelegate1? _onCall1;

		private readonly global::System.Collections.Generic.List<(string? propertyName, global::System.Threading.CancellationToken? token, global::Neatoo.RunRulesFlag? runRules)> _calls = new();

		/// <summary>Number of times this method was called.</summary>
		public int CallCount => _calls.Count;

		/// <summary>True if this method was called at least once.</summary>
		public bool WasCalled => _calls.Count > 0;

		/// <summary>Arguments from the most recent call (nullable for params not in all overloads).</summary>
		public (string? propertyName, global::System.Threading.CancellationToken? token, global::Neatoo.RunRulesFlag? runRules)? LastCallArgs => _calls.Count > 0 ? _calls[_calls.Count - 1] : null;

		/// <summary>All recorded calls with their arguments.</summary>
		public global::System.Collections.Generic.IReadOnlyList<(string? propertyName, global::System.Threading.CancellationToken? token, global::Neatoo.RunRulesFlag? runRules)> AllCalls => _calls;

		/// <summary>Sets callback for RunRules(propertyName, token) overload.</summary>
		public void OnCall(RunRulesDelegate0 callback) => _onCall0 = callback;

		/// <summary>Sets callback for RunRules(runRules, token) overload.</summary>
		public void OnCall(RunRulesDelegate1 callback) => _onCall1 = callback;

		internal RunRulesDelegate0? GetCallback0() => _onCall0;
		internal RunRulesDelegate1? GetCallback1() => _onCall1;

		/// <summary>Records a method call.</summary>
		public void RecordCall(string propertyName, global::System.Threading.CancellationToken? token) => _calls.Add((propertyName, token, default));
		/// <summary>Records a method call.</summary>
		public void RecordCall(global::Neatoo.RunRulesFlag runRules, global::System.Threading.CancellationToken? token) => _calls.Add((default, token, runRules));

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { _calls.Clear(); _onCall0 = null; _onCall1 = null; }
	}

	/// <summary>Tracks and configures behavior for ClearAllMessages.</summary>
	public sealed class ClearAllMessagesHandler
	{
		/// <summary>Delegate for ClearAllMessages().</summary>
		public delegate void ClearAllMessagesDelegate(EntityBaseStub ko);

		private ClearAllMessagesDelegate? _onCall;

		/// <summary>Number of times this method was called.</summary>
		public int CallCount { get; private set; }

		/// <summary>True if this method was called at least once.</summary>
		public bool WasCalled => CallCount > 0;

		/// <summary>Sets callback for ClearAllMessages(parameterless) overload.</summary>
		public void OnCall(ClearAllMessagesDelegate callback) => _onCall = callback;

		internal ClearAllMessagesDelegate? GetCallback() => _onCall;

		/// <summary>Records a method call.</summary>
		public void RecordCall() => CallCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { CallCount = 0; _onCall = null; }
	}

	/// <summary>Tracks and configures behavior for ClearSelfMessages.</summary>
	public sealed class ClearSelfMessagesHandler
	{
		/// <summary>Delegate for ClearSelfMessages().</summary>
		public delegate void ClearSelfMessagesDelegate(EntityBaseStub ko);

		private ClearSelfMessagesDelegate? _onCall;

		/// <summary>Number of times this method was called.</summary>
		public int CallCount { get; private set; }

		/// <summary>True if this method was called at least once.</summary>
		public bool WasCalled => CallCount > 0;

		/// <summary>Sets callback for ClearSelfMessages(parameterless) overload.</summary>
		public void OnCall(ClearSelfMessagesDelegate callback) => _onCall = callback;

		internal ClearSelfMessagesDelegate? GetCallback() => _onCall;

		/// <summary>Records a method call.</summary>
		public void RecordCall() => CallCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { CallCount = 0; _onCall = null; }
	}

	/// <summary>Tracks and configures behavior for WaitForTasks.</summary>
	public sealed class WaitForTasksHandler
	{
		/// <summary>Delegate for WaitForTasks().</summary>
		public delegate global::System.Threading.Tasks.Task WaitForTasksDelegate(EntityBaseStub ko);

		private WaitForTasksDelegate? _onCall;

		/// <summary>Number of times this method was called.</summary>
		public int CallCount { get; private set; }

		/// <summary>True if this method was called at least once.</summary>
		public bool WasCalled => CallCount > 0;

		/// <summary>Sets callback for WaitForTasks(parameterless) overload.</summary>
		public void OnCall(WaitForTasksDelegate callback) => _onCall = callback;

		internal WaitForTasksDelegate? GetCallback() => _onCall;

		/// <summary>Records a method call.</summary>
		public void RecordCall() => CallCount++;

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { CallCount = 0; _onCall = null; }
	}

	/// <summary>Tracks and raises PropertyChanged.</summary>
	public sealed class PropertyChangedHandler
	{
		private global::System.ComponentModel.PropertyChangedEventHandler? _handler;
		private readonly global::System.Collections.Generic.List<(object? sender, global::System.ComponentModel.PropertyChangedEventArgs e)> _raises = new();

		/// <summary>Number of times handlers were added.</summary>
		public int SubscribeCount { get; private set; }

		/// <summary>Number of times handlers were removed.</summary>
		public int UnsubscribeCount { get; private set; }

		/// <summary>True if at least one handler is subscribed.</summary>
		public bool HasSubscribers => _handler != null;

		/// <summary>Number of times the event was raised.</summary>
		public int RaiseCount => _raises.Count;

		/// <summary>True if the event was raised at least once.</summary>
		public bool WasRaised => RaiseCount > 0;

		/// <summary>Arguments from the most recent raise.</summary>
		public (object? sender, global::System.ComponentModel.PropertyChangedEventArgs e)? LastRaiseArgs => _raises.Count > 0 ? _raises[_raises.Count - 1] : null;

		/// <summary>All recorded raise invocations.</summary>
		public global::System.Collections.Generic.IReadOnlyList<(object? sender, global::System.ComponentModel.PropertyChangedEventArgs e)> AllRaises => _raises;

		internal void Add(global::System.ComponentModel.PropertyChangedEventHandler? handler)
		{
			_handler += handler;
			SubscribeCount++;
		}

		internal void Remove(global::System.ComponentModel.PropertyChangedEventHandler? handler)
		{
			_handler -= handler;
			UnsubscribeCount++;
		}

		/// <summary>Raises the event.</summary>
		public void Raise(object? sender, global::System.ComponentModel.PropertyChangedEventArgs e)
		{
			_raises.Add((sender, e));
			_handler?.Invoke(sender, e);
		}

		/// <summary>Resets all tracking counters.</summary>
		public void Reset() { SubscribeCount = 0; UnsubscribeCount = 0; _raises.Clear(); }

		/// <summary>Clears all handlers and resets tracking.</summary>
		public void Clear() { _handler = null; Reset(); }
	}

	/// <summary>Tracks and raises NeatooPropertyChanged.</summary>
	public sealed class NeatooPropertyChangedHandler
	{
		private global::Neatoo.NeatooPropertyChanged? _handler;
		private readonly global::System.Collections.Generic.List<global::Neatoo.NeatooPropertyChangedEventArgs> _raises = new();

		/// <summary>Number of times handlers were added.</summary>
		public int SubscribeCount { get; private set; }

		/// <summary>Number of times handlers were removed.</summary>
		public int UnsubscribeCount { get; private set; }

		/// <summary>True if at least one handler is subscribed.</summary>
		public bool HasSubscribers => _handler != null;

		/// <summary>Number of times the event was raised.</summary>
		public int RaiseCount => _raises.Count;

		/// <summary>True if the event was raised at least once.</summary>
		public bool WasRaised => RaiseCount > 0;

		/// <summary>Arguments from the most recent raise.</summary>
		public global::Neatoo.NeatooPropertyChangedEventArgs? LastRaiseArgs => _raises.Count > 0 ? _raises[_raises.Count - 1] : default;

		/// <summary>All recorded raise invocations.</summary>
		public global::System.Collections.Generic.IReadOnlyList<global::Neatoo.NeatooPropertyChangedEventArgs> AllRaises => _raises;

		internal void Add(global::Neatoo.NeatooPropertyChanged handler)
		{
			_handler += handler;
			SubscribeCount++;
		}

		internal void Remove(global::Neatoo.NeatooPropertyChanged handler)
		{
			_handler -= handler;
			UnsubscribeCount++;
		}

		/// <summary>Raises the event and awaits all handlers sequentially.</summary>
		public async global::System.Threading.Tasks.Task RaiseAsync(global::Neatoo.NeatooPropertyChangedEventArgs propertyNameBreadCrumbs)
		{
			_raises.Add(propertyNameBreadCrumbs);
			if (_handler == null) return;
			foreach (var h in _handler.GetInvocationList())
				await ((global::Neatoo.NeatooPropertyChanged)h)(propertyNameBreadCrumbs);
		}

		/// <summary>Resets all tracking counters.</summary>
		public void Reset() { SubscribeCount = 0; UnsubscribeCount = 0; _raises.Clear(); }

		/// <summary>Clears all handlers and resets tracking.</summary>
		public void Clear() { _handler = null; Reset(); }
	}

	/// <summary>Spy for EntityBaseStub - tracks invocations and configures behavior.</summary>
	public sealed class EntityBaseStubSpy
	{
		/// <summary>Handler for ModifiedProperties.</summary>
		public ModifiedPropertiesHandler ModifiedProperties { get; } = new();
		/// <summary>Handler for StringIndexer.</summary>
		public StringIndexerHandler StringIndexer { get; } = new();
		/// <summary>Handler for IsPaused.</summary>
		public IsPausedHandler IsPaused { get; } = new();
		/// <summary>Handler for Parent.</summary>
		public ParentHandler Parent { get; } = new();
		/// <summary>Handler for IsValid.</summary>
		public IsValidHandler IsValid { get; } = new();
		/// <summary>Handler for IsSelfValid.</summary>
		public IsSelfValidHandler IsSelfValid { get; } = new();
		/// <summary>Handler for PropertyMessages.</summary>
		public PropertyMessagesHandler PropertyMessages { get; } = new();
		/// <summary>Handler for IsBusy.</summary>
		public IsBusyHandler IsBusy { get; } = new();
		/// <summary>Handler for IsChild.</summary>
		public IsChildHandler IsChild { get; } = new();
		/// <summary>Handler for IsModified.</summary>
		public IsModifiedHandler IsModified { get; } = new();
		/// <summary>Handler for IsSelfModified.</summary>
		public IsSelfModifiedHandler IsSelfModified { get; } = new();
		/// <summary>Handler for IsMarkedModified.</summary>
		public IsMarkedModifiedHandler IsMarkedModified { get; } = new();
		/// <summary>Handler for IsSavable.</summary>
		public IsSavableHandler IsSavable { get; } = new();
		/// <summary>Handler for IsDeleted.</summary>
		public IsDeletedHandler IsDeleted { get; } = new();
		/// <summary>Handler for IsNew.</summary>
		public IsNewHandler IsNew { get; } = new();
		/// <summary>Handler for Delete.</summary>
		public DeleteHandler Delete { get; } = new();
		/// <summary>Handler for UnDelete.</summary>
		public UnDeleteHandler UnDelete { get; } = new();
		/// <summary>Handler for Save.</summary>
		public SaveHandler Save { get; } = new();
		/// <summary>Handler for GetProperty.</summary>
		public GetPropertyHandler GetProperty { get; } = new();
		/// <summary>Handler for TryGetProperty.</summary>
		public TryGetPropertyHandler TryGetProperty { get; } = new();
		/// <summary>Handler for RunRules.</summary>
		public RunRulesHandler RunRules { get; } = new();
		/// <summary>Handler for ClearAllMessages.</summary>
		public ClearAllMessagesHandler ClearAllMessages { get; } = new();
		/// <summary>Handler for ClearSelfMessages.</summary>
		public ClearSelfMessagesHandler ClearSelfMessages { get; } = new();
		/// <summary>Handler for WaitForTasks.</summary>
		public WaitForTasksHandler WaitForTasks { get; } = new();
		/// <summary>Handler for PropertyChanged event.</summary>
		public PropertyChangedHandler PropertyChanged { get; } = new();
		/// <summary>Handler for NeatooPropertyChanged event.</summary>
		public NeatooPropertyChangedHandler NeatooPropertyChanged { get; } = new();
	}

	/// <summary>Tracks invocations and configures behavior for all interface members.</summary>
	public EntityBaseStubSpy Spy { get; } = new();

	/// <summary>Returns this instance as Neatoo.IEntityBase.</summary>
	public Neatoo.IEntityBase AsEntityBase() => this;

	/// <summary>Returns this instance as Neatoo.IValidateBase.</summary>
	public Neatoo.IValidateBase AsValidateBase() => this;

	/// <summary>Returns this instance as Neatoo.IBase.</summary>
	public Neatoo.IBase AsBase() => this;

	/// <summary>Returns this instance as System.ComponentModel.INotifyPropertyChanged.</summary>
	public System.ComponentModel.INotifyPropertyChanged AsNotifyPropertyChanged() => this;

	/// <summary>Returns this instance as Neatoo.INotifyNeatooPropertyChanged.</summary>
	public Neatoo.INotifyNeatooPropertyChanged AsNotifyNeatooPropertyChanged() => this;

	/// <summary>Returns this instance as Neatoo.IValidateMetaProperties.</summary>
	public Neatoo.IValidateMetaProperties AsValidateMetaProperties() => this;

	/// <summary>Returns this instance as Neatoo.IBaseMetaProperties.</summary>
	public Neatoo.IBaseMetaProperties AsBaseMetaProperties() => this;

	/// <summary>Returns this instance as Neatoo.IEntityMetaProperties.</summary>
	public Neatoo.IEntityMetaProperties AsEntityMetaProperties() => this;

	/// <summary>Returns this instance as Neatoo.RemoteFactory.IFactorySaveMeta.</summary>
	public Neatoo.RemoteFactory.IFactorySaveMeta AsFactorySaveMeta() => this;

	/// <summary>Backing field for ModifiedProperties.</summary>
	protected global::System.Collections.Generic.IEnumerable<string> ModifiedPropertiesBacking { get; } = global::System.Array.Empty<string>();

	/// <summary>Backing dictionary for StringIndexer. Pre-populate with values or use OnGet callback.</summary>
	public global::System.Collections.Generic.Dictionary<string, global::Neatoo.IEntityProperty> StringIndexerBacking { get; } = new();

	/// <summary>Backing field for IsPaused.</summary>
	protected bool IsPausedBacking { get; }

	/// <summary>Backing field for Parent.</summary>
	protected global::Neatoo.IBase? ParentBacking { get; }

	/// <summary>Backing field for IsValid.</summary>
	protected bool IsValidBacking { get; }

	/// <summary>Backing field for IsSelfValid.</summary>
	protected bool IsSelfValidBacking { get; }

	/// <summary>Backing field for PropertyMessages.</summary>
	protected global::System.Collections.Generic.IReadOnlyCollection<global::Neatoo.IPropertyMessage> PropertyMessagesBacking { get; } = global::System.Array.Empty<global::Neatoo.IPropertyMessage>();

	/// <summary>Backing field for IsBusy.</summary>
	protected bool IsBusyBacking { get; }

	/// <summary>Backing field for IsChild.</summary>
	protected bool IsChildBacking { get; }

	/// <summary>Backing field for IsModified.</summary>
	protected bool IsModifiedBacking { get; }

	/// <summary>Backing field for IsSelfModified.</summary>
	protected bool IsSelfModifiedBacking { get; }

	/// <summary>Backing field for IsMarkedModified.</summary>
	protected bool IsMarkedModifiedBacking { get; }

	/// <summary>Backing field for IsSavable.</summary>
	protected bool IsSavableBacking { get; }

	/// <summary>Backing field for IsDeleted.</summary>
	protected bool IsDeletedBacking { get; }

	/// <summary>Backing field for IsNew.</summary>
	protected bool IsNewBacking { get; }

	void Neatoo.IEntityBase.Delete()
	{
		Spy.Delete.RecordCall();
		if (Spy.Delete.GetCallback() is { } onCallCallback)
		{ onCallCallback(this); return; }
	}

	void Neatoo.IEntityBase.UnDelete()
	{
		Spy.UnDelete.RecordCall();
		if (Spy.UnDelete.GetCallback() is { } onCallCallback)
		{ onCallCallback(this); return; }
	}

	global::System.Threading.Tasks.Task<global::Neatoo.IEntityBase> Neatoo.IEntityBase.Save()
	{
		Spy.Save.RecordCall();
		if (Spy.Save.GetCallback() is { } onCallCallback)
			return onCallCallback(this);
		throw new global::System.InvalidOperationException("No implementation provided for non-nullable return type. Define a protected method 'Save' in your partial class, or set Spy.Save.OnCall.");
	}

	global::System.Collections.Generic.IEnumerable<string> Neatoo.IEntityBase.ModifiedProperties
	{
		get
		{
			Spy.ModifiedProperties.RecordGet();
			if (Spy.ModifiedProperties.OnGet is { } onGetCallback)
				return onGetCallback(this);
			return ModifiedPropertiesBacking;
		}
	}

	global::Neatoo.IEntityProperty Neatoo.IEntityBase.this[string propertyName]
	{
		get
		{
			Spy.StringIndexer.RecordGet(propertyName);
			if (Spy.StringIndexer.OnGet is { } onGetCallback)
				return onGetCallback(this, propertyName);
			if (StringIndexerBacking.TryGetValue(propertyName, out var value))
				return value;
			throw new global::System.Collections.Generic.KeyNotFoundException($"Key '{propertyName}' not found. Set Spy.StringIndexer.OnGet or add to StringIndexerBacking dictionary.");
		}
	}

	global::Neatoo.IValidateProperty Neatoo.IValidateBase.GetProperty(string propertyName)
	{
		Spy.GetProperty.RecordCall(propertyName);
		if (Spy.GetProperty.GetCallback() is { } onCallCallback)
			return onCallCallback(this, propertyName);
		throw new global::System.InvalidOperationException("No implementation provided for non-nullable return type. Define a protected method 'GetProperty' in your partial class, or set Spy.GetProperty.OnCall.");
	}

	bool Neatoo.IValidateBase.TryGetProperty(string propertyName, out global::Neatoo.IValidateProperty validateProperty)
	{
		validateProperty = default!;
		Spy.TryGetProperty.RecordCall(propertyName);
		if (Spy.TryGetProperty.GetCallback() is { } onCallCallback)
			return onCallCallback(this, propertyName, out validateProperty);
		throw new global::System.InvalidOperationException("No implementation provided for non-nullable return type. Define a protected method 'TryGetProperty' in your partial class, or set Spy.TryGetProperty.OnCall.");
	}

	bool Neatoo.IValidateBase.IsPaused
	{
		get
		{
			Spy.IsPaused.RecordGet();
			if (Spy.IsPaused.OnGet is { } onGetCallback)
				return onGetCallback(this);
			return IsPausedBacking;
		}
	}

	global::Neatoo.IValidateProperty Neatoo.IValidateBase.this[string propertyName]
	{
		get
		{
			Spy.StringIndexer.RecordGet(propertyName);
			if (Spy.StringIndexer.OnGet is { } onGetCallback)
				return onGetCallback(this, propertyName);
			if (StringIndexerBacking.TryGetValue(propertyName, out var value))
				return value;
			throw new global::System.Collections.Generic.KeyNotFoundException($"Key '{propertyName}' not found. Set Spy.StringIndexer.OnGet or add to StringIndexerBacking dictionary.");
		}
	}

	global::Neatoo.IBase? Neatoo.IBase.Parent
	{
		get
		{
			Spy.Parent.RecordGet();
			if (Spy.Parent.OnGet is { } onGetCallback)
				return onGetCallback(this);
			return ParentBacking;
		}
	}

	event global::System.ComponentModel.PropertyChangedEventHandler? System.ComponentModel.INotifyPropertyChanged.PropertyChanged
	{
		add => Spy.PropertyChanged.Add(value);
		remove => Spy.PropertyChanged.Remove(value);
	}

	event global::Neatoo.NeatooPropertyChanged Neatoo.INotifyNeatooPropertyChanged.NeatooPropertyChanged
	{
		add => Spy.NeatooPropertyChanged.Add(value);
		remove => Spy.NeatooPropertyChanged.Remove(value);
	}

	global::System.Threading.Tasks.Task Neatoo.IValidateMetaProperties.RunRules(string propertyName, global::System.Threading.CancellationToken? token)
	{
		Spy.RunRules.RecordCall(propertyName, token);
		if (Spy.RunRules.GetCallback0() is { } onCallCallback)
			return onCallCallback(this, propertyName, token);
		return global::System.Threading.Tasks.Task.CompletedTask;
	}

	global::System.Threading.Tasks.Task Neatoo.IValidateMetaProperties.RunRules(global::Neatoo.RunRulesFlag runRules, global::System.Threading.CancellationToken? token)
	{
		Spy.RunRules.RecordCall(runRules, token);
		if (Spy.RunRules.GetCallback1() is { } onCallCallback)
			return onCallCallback(this, runRules, token);
		return global::System.Threading.Tasks.Task.CompletedTask;
	}

	void Neatoo.IValidateMetaProperties.ClearAllMessages()
	{
		Spy.ClearAllMessages.RecordCall();
		if (Spy.ClearAllMessages.GetCallback() is { } onCallCallback)
		{ onCallCallback(this); return; }
	}

	void Neatoo.IValidateMetaProperties.ClearSelfMessages()
	{
		Spy.ClearSelfMessages.RecordCall();
		if (Spy.ClearSelfMessages.GetCallback() is { } onCallCallback)
		{ onCallCallback(this); return; }
	}

	bool Neatoo.IValidateMetaProperties.IsValid
	{
		get
		{
			Spy.IsValid.RecordGet();
			if (Spy.IsValid.OnGet is { } onGetCallback)
				return onGetCallback(this);
			return IsValidBacking;
		}
	}

	bool Neatoo.IValidateMetaProperties.IsSelfValid
	{
		get
		{
			Spy.IsSelfValid.RecordGet();
			if (Spy.IsSelfValid.OnGet is { } onGetCallback)
				return onGetCallback(this);
			return IsSelfValidBacking;
		}
	}

	global::System.Collections.Generic.IReadOnlyCollection<global::Neatoo.IPropertyMessage> Neatoo.IValidateMetaProperties.PropertyMessages
	{
		get
		{
			Spy.PropertyMessages.RecordGet();
			if (Spy.PropertyMessages.OnGet is { } onGetCallback)
				return onGetCallback(this);
			return PropertyMessagesBacking;
		}
	}

	global::System.Threading.Tasks.Task Neatoo.IBaseMetaProperties.WaitForTasks()
	{
		Spy.WaitForTasks.RecordCall();
		if (Spy.WaitForTasks.GetCallback() is { } onCallCallback)
			return onCallCallback(this);
		return global::System.Threading.Tasks.Task.CompletedTask;
	}

	bool Neatoo.IBaseMetaProperties.IsBusy
	{
		get
		{
			Spy.IsBusy.RecordGet();
			if (Spy.IsBusy.OnGet is { } onGetCallback)
				return onGetCallback(this);
			return IsBusyBacking;
		}
	}

	bool Neatoo.IEntityMetaProperties.IsChild
	{
		get
		{
			Spy.IsChild.RecordGet();
			if (Spy.IsChild.OnGet is { } onGetCallback)
				return onGetCallback(this);
			return IsChildBacking;
		}
	}

	bool Neatoo.IEntityMetaProperties.IsModified
	{
		get
		{
			Spy.IsModified.RecordGet();
			if (Spy.IsModified.OnGet is { } onGetCallback)
				return onGetCallback(this);
			return IsModifiedBacking;
		}
	}

	bool Neatoo.IEntityMetaProperties.IsSelfModified
	{
		get
		{
			Spy.IsSelfModified.RecordGet();
			if (Spy.IsSelfModified.OnGet is { } onGetCallback)
				return onGetCallback(this);
			return IsSelfModifiedBacking;
		}
	}

	bool Neatoo.IEntityMetaProperties.IsMarkedModified
	{
		get
		{
			Spy.IsMarkedModified.RecordGet();
			if (Spy.IsMarkedModified.OnGet is { } onGetCallback)
				return onGetCallback(this);
			return IsMarkedModifiedBacking;
		}
	}

	bool Neatoo.IEntityMetaProperties.IsSavable
	{
		get
		{
			Spy.IsSavable.RecordGet();
			if (Spy.IsSavable.OnGet is { } onGetCallback)
				return onGetCallback(this);
			return IsSavableBacking;
		}
	}

	bool Neatoo.RemoteFactory.IFactorySaveMeta.IsDeleted
	{
		get
		{
			Spy.IsDeleted.RecordGet();
			if (Spy.IsDeleted.OnGet is { } onGetCallback)
				return onGetCallback(this);
			return IsDeletedBacking;
		}
	}

	bool Neatoo.RemoteFactory.IFactorySaveMeta.IsNew
	{
		get
		{
			Spy.IsNew.RecordGet();
			if (Spy.IsNew.OnGet is { } onGetCallback)
				return onGetCallback(this);
			return IsNewBacking;
		}
	}

}
