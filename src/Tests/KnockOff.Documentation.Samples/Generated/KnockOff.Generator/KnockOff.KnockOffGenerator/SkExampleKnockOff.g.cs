// <auto-generated/>
#nullable enable

namespace KnockOff.Documentation.Samples.Skills;

partial class SkExampleKnockOff
{
	/// <summary>Tracks and configures behavior for ISkUserService.GetUser.</summary>
	public sealed class ISkUserService_GetUserHandler
	{
		/// <summary>Delegate for GetUser(int id).</summary>
		public delegate global::KnockOff.Documentation.Samples.Skills.SkUser GetUserDelegate(SkExampleKnockOff ko, int id);

		/// <summary>Number of times this method was called.</summary>
		public int CallCount { get; private set; }

		/// <summary>True if this method was called at least once.</summary>
		public bool WasCalled => CallCount > 0;

		/// <summary>The 'id' argument from the most recent call.</summary>
		public int? LastCallArg { get; private set; }

		/// <summary>Callback invoked when this method is called. If set, its return value is used.</summary>
		public GetUserDelegate? OnCall { get; set; }

		/// <summary>Records a method call.</summary>
		public void RecordCall(int id) { CallCount++; LastCallArg = id; }

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { CallCount = 0; LastCallArg = default; OnCall = null; }
	}

	/// <summary>Tracks invocations and configures behavior for KnockOff.Documentation.Samples.Skills.ISkUserService.</summary>
	public sealed class ISkUserServiceKO
	{
		/// <summary>Handler for GetUser.</summary>
		public ISkUserService_GetUserHandler GetUser { get; } = new();
	}

	/// <summary>Tracks and configures behavior for ISkPropertyStore.StringIndexer.</summary>
	public sealed class ISkPropertyStore_StringIndexerHandler
	{
		/// <summary>Number of times the getter was accessed.</summary>
		public int GetCount { get; private set; }

		/// <summary>The key from the most recent getter access.</summary>
		public string? LastGetKey { get; private set; }

		/// <summary>Callback invoked when the getter is accessed. If set, its return value is used.</summary>
		public global::System.Func<SkExampleKnockOff, string, global::KnockOff.Documentation.Samples.Skills.SkUser?>? OnGet { get; set; }

		/// <summary>Records a getter access.</summary>
		public void RecordGet(string key) { GetCount++; LastGetKey = key; }

		/// <summary>Number of times the setter was accessed.</summary>
		public int SetCount { get; private set; }

		/// <summary>The key-value pair from the most recent setter access.</summary>
		public (string key, global::KnockOff.Documentation.Samples.Skills.SkUser? value)? LastSetEntry { get; private set; }

		/// <summary>Callback invoked when the setter is accessed.</summary>
		public global::System.Action<SkExampleKnockOff, string, global::KnockOff.Documentation.Samples.Skills.SkUser?>? OnSet { get; set; }

		/// <summary>Records a setter access.</summary>
		public void RecordSet(string key, global::KnockOff.Documentation.Samples.Skills.SkUser? value) { SetCount++; LastSetEntry = (key, value); }

		/// <summary>Resets all tracking state.</summary>
		public void Reset() { GetCount = 0; LastGetKey = default; OnGet = null; SetCount = 0; LastSetEntry = default; OnSet = null; }
	}

	/// <summary>Tracks invocations and configures behavior for KnockOff.Documentation.Samples.Skills.ISkPropertyStore.</summary>
	public sealed class ISkPropertyStoreKO
	{
		/// <summary>Handler for StringIndexer.</summary>
		public ISkPropertyStore_StringIndexerHandler StringIndexer { get; } = new();
	}

	/// <summary>Tracks and raises ISkEventSource.DataReceived.</summary>
	public sealed class ISkEventSource_DataReceivedHandler
	{
		private global::System.EventHandler<string>? _handler;
		private readonly global::System.Collections.Generic.List<(object? sender, string e)> _raises = new();

		/// <summary>Number of times handlers were added.</summary>
		public int SubscribeCount { get; private set; }

		/// <summary>Number of times handlers were removed.</summary>
		public int UnsubscribeCount { get; private set; }

		/// <summary>True if at least one handler is subscribed.</summary>
		public bool HasSubscribers => _handler != null;

		/// <summary>Number of times the event was raised.</summary>
		public int RaiseCount => _raises.Count;

		/// <summary>True if the event was raised at least once.</summary>
		public bool WasRaised => RaiseCount > 0;

		/// <summary>Arguments from the most recent raise.</summary>
		public (object? sender, string e)? LastRaiseArgs => _raises.Count > 0 ? _raises[_raises.Count - 1] : null;

		/// <summary>All recorded raise invocations.</summary>
		public global::System.Collections.Generic.IReadOnlyList<(object? sender, string e)> AllRaises => _raises;

		internal void Add(global::System.EventHandler<string> handler)
		{
			_handler += handler;
			SubscribeCount++;
		}

		internal void Remove(global::System.EventHandler<string> handler)
		{
			_handler -= handler;
			UnsubscribeCount++;
		}

		/// <summary>Raises the event.</summary>
		public void Raise(object? sender, string e)
		{
			_raises.Add((sender, e));
			_handler?.Invoke(sender, e);
		}

		/// <summary>Raises the event with null sender.</summary>
		public void Raise(string e) => Raise(null, e);

		/// <summary>Resets all tracking counters.</summary>
		public void Reset() { SubscribeCount = 0; UnsubscribeCount = 0; _raises.Clear(); }

		/// <summary>Clears all handlers and resets tracking.</summary>
		public void Clear() { _handler = null; Reset(); }
	}

	/// <summary>Tracks invocations and configures behavior for KnockOff.Documentation.Samples.Skills.ISkEventSource.</summary>
	public sealed class ISkEventSourceKO
	{
		/// <summary>Handler for DataReceived event.</summary>
		public ISkEventSource_DataReceivedHandler DataReceived { get; } = new();
	}

	/// <summary>Tracks invocations and configures behavior for KnockOff.Documentation.Samples.Skills.ISkUserService.</summary>
	public ISkUserServiceKO ISkUserService { get; } = new();

	/// <summary>Tracks invocations and configures behavior for KnockOff.Documentation.Samples.Skills.ISkPropertyStore.</summary>
	public ISkPropertyStoreKO ISkPropertyStore { get; } = new();

	/// <summary>Tracks invocations and configures behavior for KnockOff.Documentation.Samples.Skills.ISkEventSource.</summary>
	public ISkEventSourceKO ISkEventSource { get; } = new();

	/// <summary>Returns this instance as KnockOff.Documentation.Samples.Skills.ISkUserService.</summary>
	public KnockOff.Documentation.Samples.Skills.ISkUserService AsSkUserService() => this;

	/// <summary>Returns this instance as KnockOff.Documentation.Samples.Skills.ISkPropertyStore.</summary>
	public KnockOff.Documentation.Samples.Skills.ISkPropertyStore AsSkPropertyStore() => this;

	/// <summary>Returns this instance as KnockOff.Documentation.Samples.Skills.ISkEventSource.</summary>
	public KnockOff.Documentation.Samples.Skills.ISkEventSource AsSkEventSource() => this;

	/// <summary>Backing dictionary for ISkPropertyStore.StringIndexer. Pre-populate with values or use OnGet callback.</summary>
	public global::System.Collections.Generic.Dictionary<string, global::KnockOff.Documentation.Samples.Skills.SkUser?> ISkPropertyStore_StringIndexerBacking { get; } = new();

	global::KnockOff.Documentation.Samples.Skills.SkUser KnockOff.Documentation.Samples.Skills.ISkUserService.GetUser(int id)
	{
		ISkUserService.GetUser.RecordCall(id);
		if (ISkUserService.GetUser.OnCall is { } onCallCallback)
			return onCallCallback(this, id);
		return new global::KnockOff.Documentation.Samples.Skills.SkUser();
	}

	global::KnockOff.Documentation.Samples.Skills.SkUser? KnockOff.Documentation.Samples.Skills.ISkPropertyStore.this[string key]
	{
		get
		{
			ISkPropertyStore.StringIndexer.RecordGet(key);
			if (ISkPropertyStore.StringIndexer.OnGet is { } onGetCallback)
				return onGetCallback(this, key);
			if (ISkPropertyStore_StringIndexerBacking.TryGetValue(key, out var value))
				return value;
			return default!;
		}
		set
		{
			ISkPropertyStore.StringIndexer.RecordSet(key, value);
			if (ISkPropertyStore.StringIndexer.OnSet is { } onSetCallback)
				onSetCallback(this, key, value);
			else
				ISkPropertyStore_StringIndexerBacking[key] = value;
		}
	}

	event global::System.EventHandler<string> KnockOff.Documentation.Samples.Skills.ISkEventSource.DataReceived
	{
		add => ISkEventSource.DataReceived.Add(value);
		remove => ISkEventSource.DataReceived.Remove(value);
	}

}
