# v10.13.1 - Best Practices Guide & Generator Refactoring

**Release Date:** 2026-01-10

## Summary

This release adds a comprehensive best practices guide and refactors the source generator into partial classes for improved maintainability.

## Documentation

### New Best Practices Guide

Added `docs/guides/best-practices.md` covering:

- **Embrace Source Generation** - KnockOff handles any interface complexity
- **Stub Minimalism** - Only configure what your test needs
- **User Methods vs Callbacks** - When to use each pattern
- **Property Configuration** - `Value` vs `OnGet` decision guide
- **Reset Behavior** - Understanding what `Reset()` clears (and doesn't)
- **Out/Ref Parameters** - Correct delegate syntax
- **Nested Classes** - Container classes must be `partial`
- **Method Overloads** - Numeric suffix naming convention
- **Stand-Alone vs Inline Stubs** - When to use each pattern

### Key Guidance

| Practice | Do | Don't |
|----------|-----|-------|
| Interface complexity | Use KnockOff for any interface | Create manual test doubles |
| Static property values | Use `Value` | Use `OnGet` for static data |
| Shared interfaces | Use stand-alone stubs | Duplicate inline stubs |
| Shared behavior | Use user methods | Duplicate callback setup |

## Internal Improvements

### Generator Refactoring

Split `KnockOffGenerator.cs` into focused partial classes:

| File | Responsibility |
|------|----------------|
| `KnockOffGenerator.cs` | Entry point, pipeline setup |
| `KnockOffGenerator.Transform.cs` | Syntax to model transformation |
| `KnockOffGenerator.GenerateFlat.cs` | Stand-alone stub generation |
| `KnockOffGenerator.GenerateInline.cs` | Inline stub generation |
| `KnockOffGenerator.GenerateClass.cs` | Class stub generation |
| `KnockOffGenerator.Helpers.cs` | Shared utilities |
| `Models/` | Equatable model types |

This improves code navigation and makes the generator easier to maintain.

## Upgrade Notes

No breaking changes. This is a documentation and internal refactoring release.
