# v10.18.0 - Open Generic Inline Interface Stubs

**Release Date:** 2026-01-15

## Summary

This release adds support for open generic inline interface stubs using the `[KnockOff(typeof(IRepo<>))]` syntax. This enables creating generic stub classes inside test classes without pre-declaring every type argument.

## New Feature: Open Generic Inline Stubs

Use `typeof()` with an unbound generic interface to generate a generic stub class:

```csharp
[KnockOff(typeof(IRepository<>))]
public partial class MyTests { }

// Generated: MyTests.Stubs.IRepository<T>
// Use with any type argument:
var userRepo = new MyTests.Stubs.IRepository<User>();
var orderRepo = new MyTests.Stubs.IRepository<Order>();
```

### Multi-Parameter Generics

Interfaces with multiple type parameters are supported:

```csharp
[KnockOff(typeof(IKeyValueStore<,>))]
public partial class MyTests { }

// Use:
var store = new MyTests.Stubs.IKeyValueStore<string, int>();
store.Set.OnCall = (ko, key, value) => Console.WriteLine($"{key}={value}");
```

### Type Constraints Preserved

Type constraints from the interface are preserved on the generated stub:

```csharp
public interface IClassRepository<T> where T : class
{
    void Add(T item);
}

[KnockOff(typeof(IClassRepository<>))]
public partial class MyTests { }

// Constraint enforced at compile time:
var stub = new MyTests.Stubs.IClassRepository<User>();  // OK
// var stub = new MyTests.Stubs.IClassRepository<int>(); // Compile error
```

## Comparison: Open vs Closed Generic Inline Stubs

| Pattern | Syntax | Result |
|---------|--------|--------|
| Closed (existing) | `[KnockOff<IRepo<User>>]` | `Stubs.IRepoUser` (non-generic) |
| Open (new) | `[KnockOff(typeof(IRepo<>))]` | `Stubs.IRepo<T>` (generic) |

Use **closed** when you only need one type argument. Use **open** when you want one stub class usable with any type.

## Breaking Changes

None. This is a purely additive release.

## Upgrade Notes

- The `[KnockOff(Type type)]` constructor overload has been added to the attribute
- Open generic class stubs (`[KnockOff(typeof(SomeClass<>))]`) - added in v10.20
- Open generic delegate stubs (`[KnockOff(typeof(Factory<>))]`) - added in v10.20
