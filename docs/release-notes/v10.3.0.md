# v10.3.0 - Out/Ref Parameter Support

**Release Date:** 2026-01-01
**NuGet:** [KnockOff 10.3.0](https://nuget.org/packages/KnockOff/10.3.0)

## Overview

Adds support for methods with `out` and `ref` parameters.

## What's New

### Out Parameters

Methods with `out` parameters are now fully supported:

```csharp
public interface IParser
{
    bool TryParse(string input, out int result);
    void GetStats(out int count, out double average);
}

[KnockOff]
public partial class ParserKnockOff : IParser { }
```

Set callbacks with explicit types (C# requires this for out/ref lambdas):

```csharp
knockOff.Spy.TryParse.OnCall((ParserKnockOff ko, string input, out int result) =>
{
    return int.TryParse(input, out result);
});
```

**Tracking behavior**: Out parameters are NOT tracked (they're outputs, not inputs). Only input parameters appear in `LastCallArg`/`AllCalls`.

### Ref Parameters

Methods with `ref` parameters track the **input value** before modification:

```csharp
public interface IProcessor
{
    void Increment(ref int value);
}

[KnockOff]
public partial class ProcessorKnockOff : IProcessor { }

knockOff.Spy.Increment.OnCall((ProcessorKnockOff ko, ref int value) =>
{
    value = value * 2;
});

int x = 5;
processor.Increment(ref x);
Assert.Equal(10, x);  // Modified
Assert.Equal(5, knockOff.Spy.Increment.LastCallArg);  // Original input value
```

### Default Behavior Without Callback

- Out params initialize to `default`
- Void methods complete silently
- Methods with return values throw `InvalidOperationException`

---

**Full Changelog**: https://github.com/NeatooDotNet/KnockOff/compare/v10.2.0...v10.3.0
