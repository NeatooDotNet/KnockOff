# v10.12.0 - BCL Interface Compatibility

**Release Date:** 2026-01-09

## Summary

This release delivers comprehensive BCL (Base Class Library) interface support. 117 common .NET interfaces are now fully tested and working with KnockOff stubs.

## Bug Fixes

### 1. Duplicate Interceptor Classes for Inherited Members

**Issue:** When stubbing interfaces like `IEnumerator<T>` (which inherits from `IEnumerator`), duplicate interceptor classes were generated for shared members like `Current`.

**Fix:** Deduplicate members by name before generating interceptor classes, keeping the most-derived interface's version.

**Affected interfaces:** `IEnumerator<T>`, `ICollection<T>`, `IList<T>`, `IDictionary<K,V>`, and other interfaces with inheritance chains.

### 2. CS0108 Warning for Object Member Hiding

**Issue:** Interfaces with methods named `Equals`, `GetHashCode`, or `ToString` caused CS0108 warnings ("member hides inherited member") which became errors with `TreatWarningsAsErrors`.

**Fix:** Generator now emits `new` keyword for interceptor properties that would hide `object` members.

**Affected interfaces:** `IEquatable<T>`, `IStructuralEquatable`, `IFormattable`, `IEqualityComparer`, `IEqualityComparer<T>`, `IConvertible`.

### 3. CS8769 Asymmetric Property Nullability

**Issue:** Some BCL interfaces have properties where the getter returns non-nullable but the setter accepts nullable via `[AllowNull]`. This caused CS8769 errors in explicit interface implementations.

**Fix:** Generator detects `[AllowNull]`/`[DisallowNull]` attributes on setter parameters and emits `#pragma warning disable CS8769` around affected setters.

**Affected interfaces:** `IDbConnection` (ConnectionString), `IDbCommand` (CommandText).

### 4. Standalone Stubs Missing Inherited Interface Members

**Issue:** Standalone stubs (using `[KnockOff]` on a class implementing an interface) didn't generate implementations for inherited interface members.

**Fix:** Generator now walks the full interface inheritance chain and generates explicit implementations for all inherited members.

**Affected pattern:** Any standalone stub for interfaces with base interfaces (e.g., `IList<T>` which inherits `ICollection<T>`, `IEnumerable<T>`, `IEnumerable`).

## Test Coverage

| Category | Count |
|----------|-------|
| Inline stub tests | 88 |
| Standalone stub tests | 29 |
| **Total BCL interface tests** | **117** |

### Tested Interface Categories

- **Collections:** `IEnumerable<T>`, `ICollection<T>`, `IList<T>`, `IDictionary<K,V>`, `ISet<T>`, `IReadOnlyList<T>`, `IReadOnlyCollection<T>`, `IReadOnlyDictionary<K,V>`
- **Comparison:** `IEquatable<T>`, `IComparable<T>`, `IComparer<T>`, `IEqualityComparer<T>`, `IStructuralEquatable`, `IStructuralComparable`
- **Formatting:** `IFormattable`, `ISpanFormattable`, `IConvertible`, `ICustomFormatter`, `IFormatProvider`
- **Async:** `IAsyncEnumerable<T>`, `IAsyncEnumerator<T>`, `IAsyncDisposable`
- **Disposal:** `IDisposable`, `IAsyncDisposable`
- **Data Access:** `IDbConnection`, `IDbCommand`, `IDbTransaction`, `IDataReader`, `IDataRecord`
- **Cloning:** `ICloneable`
- **Observers:** `IObservable<T>`, `IObserver<T>`, `IProgress<T>`
- **Service Provider:** `IServiceProvider`

## Upgrade Notes

No breaking changes. Existing code will continue to work. Stubs that previously failed to compile for inherited interfaces will now work correctly.
